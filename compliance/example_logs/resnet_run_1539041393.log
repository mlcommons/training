~/mlperf_training/compliance ~/mlperf_training/image_classification/tensorflow
~/mlperf_training/image_classification/tensorflow
WARNING:tensorflow:From /home/taylorrobie/envs/py3_garden/lib/python3.5/site-packages/tensorflow/python/ops/distributions/distribution.py:265: ReparameterizationType.__init__ (from tensorflow.python.ops.distributions.distribution) is deprecated and will be removed after 2019-01-01.
Instructions for updating:
The TensorFlow Distributions library has moved to TensorFlow Probability (https://github.com/tensorflow/probability). You should update all references to use `tfp.distributions` instead of `tf.distributions`.
WARNING:tensorflow:From /home/taylorrobie/envs/py3_garden/lib/python3.5/site-packages/tensorflow/python/ops/distributions/bernoulli.py:169: RegisterKL.__init__ (from tensorflow.python.ops.distributions.kullback_leibler) is deprecated and will be removed after 2019-01-01.
Instructions for updating:
The TensorFlow Distributions library has moved to TensorFlow Probability (https://github.com/tensorflow/probability). You should update all references to use `tfp.distributions` instead of `tf.distributions`.
Setting random seed =  1539041393
special seeding
:::MLPv0.5.0 resnet 1539041395 (official/resnet/imagenet_main.py:341) run_start
INFO:tensorflow:Initializing RunConfig with distribution strategies.
INFO:tensorflow:Not using Distribute Coordinator.
INFO:tensorflow:Using config: {'_tf_random_seed': 1539041393, '_log_step_count_steps': 100, '_evaluation_master': '', '_save_summary_steps': 100, '_global_id_in_cluster': 0, '_model_dir': '/tmp/resnet_imagenet_1539041393', '_is_chief': True, '_task_type': 'worker', '_keep_checkpoint_every_n_hours': 10000, '_save_checkpoints_secs': 600, '_protocol': None, '_task_id': 0, '_num_worker_replicas': 1, '_distribute_coordinator_mode': None, '_keep_checkpoint_max': 5, '_device_fn': None, '_eval_distribute': None, '_save_checkpoints_steps': None, '_experimental_distribute': None, '_session_config': allow_soft_placement: true
, '_train_distribute': <tensorflow.contrib.distribute.python.one_device_strategy.OneDeviceStrategy object at 0x7f772834af98>, '_num_ps_replicas': 0, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f7727f47a90>, '_master': '', '_service': None}
:::MLPv0.5.0 resnet 1539041399 (official/resnet/imagenet_main.py:341) train_loop
WARNING:tensorflow:From /home/taylorrobie/mlperf_training/image_classification/tensorflow/official/resnet/resnet_run_loop.py:90: map_and_batch (from tensorflow.contrib.data.python.ops.batching) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.experimental.map_and_batch(...)`.
INFO:tensorflow:Calling model_fn.
WARNING:tensorflow:From /home/taylorrobie/mlperf_training/compliance/tf_mlperf_log.py:59: Print (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2018-08-20.
Instructions for updating:
Use tf.print instead of tf.Print. Note that tf.print returns a no-output operator that directly prints the output. Outside of defuns or eager mode, this operator will not be executed unless it is directly specified in session.run or used as a control dependency for other operators. This is only a concern in graph mode. Below is an example of how to ensure tf.print executes in graph mode:
```python
    sess = tf.Session()
    with sess.as_default():
        tensor = tf.range(10)
        print_op = tf.print(tensor)
        with tf.control_dependencies([print_op]):
          out = tf.add(tensor, tensor)
        sess.run(out)
    ```
Additionally, to use tf.print in python 2.7, users must make sure to import
the following:

  `from __future__ import print_function`

INFO:tensorflow:Done calling model_fn.
INFO:tensorflow:Create CheckpointSaverHook.
INFO:tensorflow:Graph was finalized.
2018-10-08 23:30:08.565048: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2018-10-08 23:30:08.713392: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:993] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2018-10-08 23:30:08.713872: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties: 
name: Tesla P100-PCIE-16GB major: 6 minor: 0 memoryClockRate(GHz): 1.3285
pciBusID: 0000:00:04.0
totalMemory: 15.90GiB freeMemory: 15.51GiB
2018-10-08 23:30:08.713916: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0
2018-10-08 23:30:09.054640: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:
2018-10-08 23:30:09.054710: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 
2018-10-08 23:30:09.054723: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N 
2018-10-08 23:30:09.055097: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15031 MB memory) -> physical GPU (device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0)
INFO:tensorflow:Running local_init_op.
INFO:tensorflow:Done running local_init_op.
INFO:tensorflow:Saving checkpoints for 0 into /tmp/resnet_imagenet_1539041393/model.ckpt.
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041417.620883][0]
INFO:tensorflow:cross_entropy = 7.478508, learning_rate = 0.0, train_accuracy = 0.0
INFO:tensorflow:{'num_examples': 0}
INFO:tensorflow:loss = 8.873268, step = 0
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041453.804167][3.1970907e-05]
INFO:tensorflow:global_step/sec: 2.95875
INFO:tensorflow:cross_entropy = 7.846868, learning_rate = 3.1970907e-05, train_accuracy = 0.0 (33.798 sec)
INFO:tensorflow:loss = 9.241622, step = 100 (33.798 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041484.746347][6.3941814e-05]
INFO:tensorflow:global_step/sec: 3.23341
INFO:tensorflow:cross_entropy = 7.315951, learning_rate = 6.3941814e-05, train_accuracy = 0.0 (30.927 sec)
INFO:tensorflow:loss = 8.710692, step = 200 (30.927 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041515.6646609][9.5912721e-05]
INFO:tensorflow:global_step/sec: 3.23316
INFO:tensorflow:cross_entropy = 7.479909, learning_rate = 9.591272e-05, train_accuracy = 0.0 (30.929 sec)
INFO:tensorflow:loss = 8.874635, step = 300 (30.930 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041546.643142][0.000127883628]
INFO:tensorflow:global_step/sec: 3.22983
INFO:tensorflow:cross_entropy = 7.207858, learning_rate = 0.00012788363, train_accuracy = 0.0 (30.962 sec)
INFO:tensorflow:loss = 8.602568, step = 400 (30.962 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041577.575985][0.000159854535]
INFO:tensorflow:global_step/sec: 3.23206
INFO:tensorflow:cross_entropy = 7.386899, learning_rate = 0.00015985454, train_accuracy = 0.0 (30.940 sec)
INFO:tensorflow:loss = 8.781591, step = 500 (30.940 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041608.493382][0.000191825442]
INFO:tensorflow:global_step/sec: 3.23522
INFO:tensorflow:cross_entropy = 6.9258523, learning_rate = 0.00019182544, train_accuracy = 0.002232143 (30.910 sec)
INFO:tensorflow:loss = 8.320531, step = 600 (30.910 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041639.3950529][0.000223796349]
INFO:tensorflow:global_step/sec: 3.23483
INFO:tensorflow:cross_entropy = 7.0599523, learning_rate = 0.00022379635, train_accuracy = 0.00390625 (30.913 sec)
INFO:tensorflow:loss = 8.454608, step = 700 (30.913 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041670.319298][0.000255767256]
INFO:tensorflow:global_step/sec: 3.2349
INFO:tensorflow:cross_entropy = 6.9192133, learning_rate = 0.00025576726, train_accuracy = 0.0034722222 (30.913 sec)
INFO:tensorflow:loss = 8.313847, step = 800 (30.914 sec)
:::MLPv0.5.0 [733bcbb0-ba4d-4730-8ea4-cf5c57bb5191][1539041701.207654][0.000287738163]
INFO:tensorflow:global_step/sec: 3.23572
INFO:tensorflow:cross_entropy = 6.8989606, learning_rate = 0.00028773816, train_accuracy = 0.003125 (30.905 sec)
INFO:tensorflow:loss = 8.293568, step = 900 (30.905 sec)
INFO:tensorflow:Saving checkpoints for 1000 into /tmp/resnet_imagenet_1539041393/model.ckpt.
INFO:tensorflow:Finalize system.
INFO:tensorflow:{'num_examples': 64000}
INFO:tensorflow:Loss for final step: 8.232682.
Starting a training cycle.
Starting to evaluate.
:::MLPv0.5.0 resnet 1539041733 (official/resnet/imagenet_main.py:341) eval_start
INFO:tensorflow:Calling model_fn.
INFO:tensorflow:Done calling model_fn.
INFO:tensorflow:Starting evaluation at 2018-10-08-23:35:35
INFO:tensorflow:Graph was finalized.
2018-10-08 23:35:36.709513: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0
2018-10-08 23:35:36.709596: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:
2018-10-08 23:35:36.709610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 
2018-10-08 23:35:36.709617: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N 
2018-10-08 23:35:36.709825: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15031 MB memory) -> physical GPU (device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0)
INFO:tensorflow:Restoring parameters from /tmp/resnet_imagenet_1539041393/model.ckpt-1000
INFO:tensorflow:Running local_init_op.
INFO:tensorflow:Done running local_init_op.
INFO:tensorflow:Evaluation [100/1000]
INFO:tensorflow:Evaluation [200/1000]
INFO:tensorflow:Evaluation [300/1000]
INFO:tensorflow:Evaluation [400/1000]
INFO:tensorflow:Evaluation [500/1000]
INFO:tensorflow:Evaluation [600/1000]
INFO:tensorflow:Evaluation [700/1000]
INFO:tensorflow:Finished evaluation at 2018-10-08-23:37:03
INFO:tensorflow:Saving dict for global step 1000: accuracy = 0.00126, accuracy_top_5 = 0.00654, global_step = 1000, loss = 9.347345, num_examples = 50000
INFO:tensorflow:Saving 'checkpoint_path' summary for global step 1000: /tmp/resnet_imagenet_1539041393/model.ckpt-1000
:::MLPv0.5.0 resnet 1539041824 (official/resnet/imagenet_main.py:341) eval_stop
INFO:tensorflow:Stop threshold of 1e-05 was passed with metric value 0.0012600000482052565.
{'accuracy_top_5': 0.00654, 'num_examples': 50000, 'accuracy': 0.00126, 'loss': 9.347345, 'global_step': 1000}
:::MLPv0.5.0 resnet 1539041824 (official/resnet/imagenet_main.py:341) run_final
